{% schema %}
{
  "name": "Product Section",
  "settings": [
    {
      "type": "text",
      "id": "section_header",
      "label": "Section Header",
      "default": "Our Products"
    },
    {
      "type": "collection",
      "id": "collection",
      "label": "Select Collection"
    }
  ],
  "blocks": [
    {
      "type": "hotspot",
      "name": "Hotspot Item",
      "settings": [
        {
          "type": "image_picker",
          "id": "product_image",
          "label": "Background Image"
        },
        {
          "type": "product",
          "id": "product_handle",
          "label": "Select Product"
        },
        {
          "type": "range",
          "id": "pos_top",
          "label": "Top Position (%)",
          "min": 0,
          "max": 100,
          "step": 1,
          "default": 20
        },
        {
          "type": "range",
          "id": "pos_left",
          "label": "Left Position (%)",
          "min": 0,
          "max": 100,
          "step": 1,
          "default": 20
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "Product Section"
    }
  ]
}
{% endschema %}

<section class="product-section">
  <h2 class="section-title">{{ section.settings.section_header }}</h2>

  {% assign collection = collections[section.settings.collection] %}
  {% if collection and collection.products_count > 0 %}
    <div class="product-grid">
      {% for product in collection.products %}
        <div class="product-card" data-handle="{{ product.handle }}">
          <img 
            src="{{ product.featured_image | image_url: width: 400 }}" 
            alt="{{ product.title }}" 
            class="product-image"
             width="{{ product.featured_image.width }}"
            height="{{ product.featured_image.height }}"
          >
          
        </div>
      {% endfor %}
    </div>
  {% else %}
    <p>No products found in this collection.</p>
  {% endif %}

  <!-- Popup Modal -->
  {% comment %} <div id="product-popup" class="product-popup">
    <div class="popup-content">
      <span class="close-btn">&times;</span>
      <div id="popup-data">Loading...</div>
    </div>
  </div> {% endcomment %}
</section>

{% stylesheet %}
 
.product-section {
  padding: 40px 5%;
}
.product-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
  gap: 20px;
}
.product-card {
  cursor: pointer;
  text-align: center;
}
.product-card img {
  width: 100%;
  border-radius: 8px;
}

.product-card-details{
  display: flex;
}
.product-inner-details{
  display: inline-flex;
  flex-direction: column;
  padding-left: 20px; 
  align-items: center;
}
{% endstylesheet %}
 
